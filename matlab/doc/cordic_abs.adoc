= Модель cordic_abs

Блок вычисления модуля комплексного числа.

Модуль комплексного числа __Z = a + i*b__ равен длине вектора __(a, b)__. Повернем этот вектор к оси абсцисс так, чтобы он был с ней сонаправлен. Тогда координата повернутого вектора по оси абсцисс и есть его длина.
Для реализации поворота сначала вычисляется __(x[0], y[0]) = (|a| , b)__, затем, с помощью алгоритма CORDIC в режиме вектор, осуществляется поворот. Поворот осуществляется поэтапно, согласно формулам:

image::https://82.179.184.185/elapidae/elapidae_model/raw/models_abs/cordic_abs/doc/cordic_stages.jpg[]

Далее __х[N]__ домножается на коэффициент __1/K__, где __K__ - коэффициент деформации алгоритма CORDIC:

image::https://82.179.184.185/elapidae/elapidae_model/raw/models_abs/cordic_abs/doc/cordic_deformation.jpg[]

Полученное значение является результатом работы cordic_abs.

Поддержка работы с 2-мя типами данных:  **sym**,  **bit**.

Битовая модель cordic_abs соответствует аппаратной https://82.179.184.185/elapidae/elapidae_dsp/tree/878cf6b85dbb7671b948c010289efa4427d77202/cordic_abs[реализации].

Каталог   _(cordic_abs)_ имеет следующую структуру:

[width="60%",options="header,footer"]
|====================
|**cordic_abs_class.m**    - класс для работы с моделью
|**cordic_abs_example.m** - пример демонстрирующий возможности  работы  с классом
|**doc**                - папка с документацией
|====================

== Класс  cordic_abs




==== Поля и методы класса cordic_abs:

* *Поля*


[width="80%",cols="3,^3,<10", frame="topbot",options="header,footer"]
|==========================
|Поле           |Доступ       | Описание
|word_len       |**private**  |разрядность данных, входные данные - целые числа (аналог **DATA_IN_WIDTH** в аппаратной реализации)
|is_signed      |**private**  |знаковость входных данных (аналог **IS_SIGNED_DATA_IN** в аппаратной реализации)
|out_len        |**private**  |разрядность выходных данных (аналог **DATA_OUT_WIDTH** в аппаратной реализации)
|cordic_stages  |**private**  |количество стадий алгоритма CORDIC (aналог **VECTOR_MODE_STAGES_QUAN** в аппаратной реализации)
|mult_stages    |**private**  |количество аппаратных стадий умножения на коэффициент 1/K (aналог **MULT_STAGES_QUANTITY** в аппаратной реализации)
|guard_bits     |**private**  |количество дополнительных разрядов после точки для стадий CORDIC (аналог **GUARD_BITS_QUANTITY** в аппаратной реализации)
|mult_guard_bits     |**private**  |количество дополнительных разрядов после точки для стадий умножения (аналог **MULT_GUARD_BITS** в аппаратной реализации)
|==========================



* *Методы*

[width="80%",cols="3,<10", frame="topbot",options="header,footer"]
|==========================
|Метод   | Описание
|cordic_abs_class(word_len, is_signed, out_len, cordic_stages, mult_stages, guard_bits, mult_guard_bits)     | задает начальные значения параметров класса. Все перечисленные **обязательно** должны быть заданы при создании объекта класса.
|cordic_abs(a, b) |в зависимости от типа входных данных определяется вызываемый метод: либо **bit_cordic_abs(a, b)**, либо **sym_cordic_abs(a, b)**, где **a** и **b** - векторы определенного типа **sym/bit**.
|bit_cordic_abs(a, b) | битовое вычисление модуля комплексного числа, где **a** и **b** - векторы типа **bit**.
|sym_cordic_abs(a, b) | символьное вычисление модуля комплексного числа, где **a** и **b** - векторы типа **sym**.
|get_coeff()  | вспомогательный метод; возвращает строку, содержащую старшие биты усеченного 1/K (количество "1" в возвращаемой строке равно mult_stages)
|==========================

== Пример работы с  классом _cordic_abs_class_:

* Вызов функции _cordic_abs_example_  выполняется коммандой:

----
cordic_abs_example()
----

**Структура** _cordic_abs_example_

Пример можно разделить на 3 части:

**1)** Работа с конструктором (созадние объекта класса, инициализация параметров класса )

----
% Заданиие параметров (в соответствии с аппаратной реализацией)
WORD_LENGTH = 32; 
IS_SIGNED = 1;
OUT_LENGTH = WORD_LENGTH; 
CORDIC_STAGES = 17; 
MULT_STAGES = 20; 
GUARD_BITS = 6;
MULT_GUARD_BITS = 7;

% class definition
example_cordic_abs = cordic_abs_class(WORD_LENGTH, IS_SIGNED, OUT_LENGTH, CORDIC_STAGES, MULT_STAGES, GUARD_BITS, MULT_GUARD_BITS); % пример работы конструктора.
% example_cordic_abs объект класса cordic_abs_class, с заданными при инициализации приватными параметрами
----


**2)** Генерация исходной выборки



----
S = A_1*sin(2*pi*freq_1*t) + A_2*sin(2*pi*freq_2*t); % генерация сложного сигнала,
% с параметризуемыми амплитудами A_1/A_2 и частотами freq_1/freq_2

X = S + A_noize*randn(size(t)); % сигнал дополняется шумом
% для управления величины шума используется A_noize

----

**3)** Демонстрация работы класса **cordic_abs_class** -  спектр сигнала. Полученный после БПФ, при помощи блока вычисления модуля комплексного числа _cordic_abs_.